<section class="relative">
  <section class="flex gap-1">
    {% for title in plot_group.plots.keys %}
    <!-- <a class="tab grow" href="{{ request.path }}?{{ plot_group.selected_param }}={{ forloop.counter0 }}"> -->
      <div data-id="{{ forloop.counter0 }}" class="tab hover:cursor-pointer grow bg-blue-800 border-solid border-t-2 border-x-2 border-hl-tertiary font-subheading px-2 rounded-t-md text-text-disabled {% if forloop.counter0 == plot_group.selected %}font-extrabold text-red-500{% endif %}">
        {{ title }}
      </div>
    <!-- </a> -->
    {% endfor %}
  </section>
  <section class="tab-content w-full self-center">
    {% for title, plot in plot_group.plots.items %}
      {% autoescape off %}
        <div data-id="{{ forloop.counter0 }}" class="min-h-fit mb-5 w-full {% if forloop.counter0 != plot_group.selected %}hidden{% endif %}">
          {{ plot }}
        </div>
      {% endautoescape %}
    {% endfor %}
  </section>
</section>


<script>
  function display_tab(id) {
    let tabs_content = document.querySelectorAll('.tab-content div[data-id]');
    tabs_content.forEach((tab_content, i) => {
      if (parseInt(id) === i) {
        tab_content.classList.remove("hidden");
      } else {
        tab_content.classList.add("hidden");

        // Force chart width to 100%

      }
    });

    let tabs = document.querySelectorAll(".tab");
    tabs.forEach((tab, i) => {
      if (parseInt(id) === i) {
        tab.classList.add("font-extrabold", "text-red-500");
      } else {
        tab.classList.remove("font-extrabold", "text-red-500");
      }
    });
  }

  let tabs = document.querySelectorAll(".tab");
  tabs.forEach((tab) => {
    tab.addEventListener("click", (e) => {
      display_tab(e.target.getAttribute("data-id"));
    });
  });
</script>
